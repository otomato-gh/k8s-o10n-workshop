# Vertical Pod Autoscaler

The Vertical Pod Autoscaler consists of 3 components:

- The VPA Recommender analyzes resource usage patterns and generates recommendations for CPU and memory settings. 

- The VPA Updater is responsible for applying the recommendations generated by the Recommender. When operating in "Auto" mode, the Updater will delete pods that need updating and create new ones with the adjusted resource settings. 

- The VPA Admission Controller intercepts pod creation requests and modifies the resource requirements according to the VPA recommendations. This ensures that even newly created pods start with adjusted resource settings, improving overall cluster efficiency from the outset. 

---

## Install the VPA

.lab[
```
cd ~
git clone https://github.com/kubernetes/autoscaler.git
cd autoscaler/vertical-pod-autoscaler
./hack/vpa-up.sh
```
]

---

## Create the VPA definition for our app

```yaml
apiVersion: autoscaling.k8s.io/v1
kind: VerticalPodAutoscaler
metadata:
  name: crypter-vpa
spec:
  targetRef:
    apiVersion: "apps/v1"
    kind:       Deployment
    name:       crypter
  updatePolicy:
    updateMode: "Auto"
```
---




